/*--★root で実行する-------------------------------------*/
/* DB作成 */
CREATE DATABASE team16_db CHARACTER SET utf8 COLLATE utf8_general_ci;

/* DBユーザを作成 */
CREATE USER IF NOT EXISTS team16_user IDENTIFIED BY 'team16_user';

/* 権限付与 */
GRANT ALL PRIVILEGES ON team16_db.* TO team16_user;

CREATE TABLE USERS (
    USER_ID VARCHAR(50) PRIMARY KEY,
    PASS VARCHAR(100) NOT NULL,
    DEPT_CODE VARCHAR(10) NOT NULL,
    DEPT_NAME VARCHAR(50) NOT NULL,
    NAME VARCHAR(100) NOT NULL,
    DELETE_FLG BOOLEAN DEFAULT FALSE
);

CREATE TABLE KINTAI (
    USER_ID VARCHAR(50),
    WORK_DATE DATE,
    WORK_TYPE VARCHAR(10) NOT NULL,
    START_TIME TIME,
    END_TIME TIME,
    BREAK_TIME INTEGER, -- 分単位
    ACTUAL_WORK_TIME INTEGER, -- 分単位
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (USER_ID, WORK_DATE)
);

CREATE TABLE SHINSHUTSU (
    USER_ID VARCHAR(50),
    SHINSHUTSU_DATE DATE,
    USED_FLG BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (USER_ID, SHINSHUTSU_DATE)
);

CREATE TABLE NENKYUU (
    USER_ID VARCHAR(50) PRIMARY KEY,
    REMAINING_DAYS INTEGER DEFAULT 20
);

-- USERSテーブルにデータを挿入
INSERT INTO USERS (USER_ID, PASS, DEPT_CODE, DEPT_NAME, NAME) VALUES
('SOUMU', 'soumu1234', 'SOUMU', '総務', '山田太郎'),
('EIGYO', 'eigyo1234', 'EIGYO', '営業', '佐藤花子'),
('DEV', 'dev1234', 'DEV', '開発', '鈴木一郎');

-- NENKYUUテーブルにデータを挿入
INSERT INTO NENKYUU (USER_ID, REMAINING_DAYS) VALUES
('SOUMU', 18),
('EIGYO', 20),
('DEV', 15);